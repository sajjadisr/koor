<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ú©ÙˆØ±Ù‡ - Ù†Ù…Ø§ÛŒØ´ Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§</title>
    <meta name="description" content="Ù†Ù…Ø§ÛŒØ´ Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ú©ÙˆØ±Ù‡ Ø¯Ø± Ø¬Ø³ØªØ¬Ùˆ Ùˆ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª">
    
    <!-- Preload Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="./main.css" type="text/css">
    
    <style>
        .ai-demo-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            font-family: 'Vazirmatn', sans-serif;
        }
        
        .ai-demo-header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
        }
        
        .ai-demo-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #e9ecef;
        }
        
        .ai-demo-section h3 {
            color: #495057;
            margin-bottom: 15px;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }
        
        .ai-input-group {
            margin-bottom: 15px;
        }
        
        .ai-input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #495057;
        }
        
        .ai-input-group input, .ai-input-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ced4da;
            border-radius: 5px;
            font-family: 'Vazirmatn', sans-serif;
        }
        
        .ai-button {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Vazirmatn', sans-serif;
            font-weight: 500;
            transition: background 0.3s;
        }
        
        .ai-button:hover {
            background: #5a6fd8;
        }
        
        .ai-button:disabled {
            background: #6c757d;
            cursor: not-allowed;
        }
        
        .ai-result {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            margin-top: 15px;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .ai-loading {
            text-align: center;
            color: #6c757d;
            font-style: italic;
        }
        
        .ai-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
            border-radius: 5px;
            padding: 10px;
            margin-top: 10px;
        }
        
        .ai-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            border-radius: 5px;
            padding: 10px;
            margin-top: 10px;
        }
        
        .back-button {
            display: inline-block;
            background: #6c757d;
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 5px;
            margin-bottom: 20px;
            transition: background 0.3s;
        }
        
        .back-button:hover {
            background: #5a6268;
        }
    </style>
</head>
<body>
    <div class="ai-demo-container">
        <a href="./index.html" class="back-button">â† Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ</a>
        
        <div class="ai-demo-header">
            <h1>Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ú©ÙˆØ±Ù‡</h1>
            <p>Ù†Ù…Ø§ÛŒØ´ Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø¬Ø³ØªØ¬Ùˆ Ùˆ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª Ù‡ÙˆØ´Ù…Ù†Ø¯</p>
        </div>
        
        <!-- Search Suggestions Demo -->
        <div class="ai-demo-section">
            <h3>Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª Ø¬Ø³ØªØ¬ÙˆÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯</h3>
            <div class="ai-input-group">
                <label for="searchInput">Ú†Ù‡ Ú†ÛŒØ²ÛŒ Ø¯Ù†Ø¨Ø§Ù„Ø´ Ù…ÛŒâ€ŒÚ¯Ø±Ø¯ÛŒØ¯ØŸ</label>
                <input type="text" id="searchInput" placeholder="Ù…Ø«Ø§Ù„: Ø¨Ø§Ø´Ú¯Ø§Ù‡ Ø¨Ø¯Ù†Ø³Ø§Ø²ÛŒ" value="Ø¨Ø§Ø´Ú¯Ø§Ù‡ Ø¨Ø¯Ù†Ø³Ø§Ø²ÛŒ">
            </div>
            <div class="ai-input-group">
                <label for="searchLocation">Ø´Ù‡Ø±:</label>
                <input type="text" id="searchLocation" placeholder="ØªÙ‡Ø±Ø§Ù†" value="ØªÙ‡Ø±Ø§Ù†">
            </div>
            <button class="ai-button" onclick="generateSearchSuggestions()">ØªÙˆÙ„ÛŒØ¯ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª</button>
            <div id="searchSuggestionsResult" class="ai-result" style="display: none;"></div>
        </div>
        
        <!-- Business Recommendations Demo -->
        <div class="ai-demo-section">
            <h3>ğŸ’¡ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª Ú©Ø³Ø¨ Ùˆ Ú©Ø§Ø±</h3>
            <div class="ai-input-group">
                <label for="userPreferences">ØªØ±Ø¬ÛŒØ­Ø§Øª Ø´Ù…Ø§:</label>
                    <textarea id="userPreferences" rows="3" placeholder="Ù…Ø«Ø§Ù„: Ø¨Ø§Ø´Ú¯Ø§Ù‡ Ù†Ø²Ø¯ÛŒÚ© Ø®Ø§Ù†Ù‡ØŒ Ù‚ÛŒÙ…Øª Ù…Ù†Ø§Ø³Ø¨ØŒ ØªØ¬Ù‡ÛŒØ²Ø§Øª Ø¬Ø¯ÛŒØ¯">Ø¨Ø§Ø´Ú¯Ø§Ù‡ Ù†Ø²Ø¯ÛŒÚ© Ø®Ø§Ù†Ù‡ØŒ Ù‚ÛŒÙ…Øª Ù…Ù†Ø§Ø³Ø¨ØŒ ØªØ¬Ù‡ÛŒØ²Ø§Øª Ø¬Ø¯ÛŒØ¯</textarea>
            </div>
            <div class="ai-input-group">
                <label for="recLocation">Ø´Ù‡Ø±:</label>
                <input type="text" id="recLocation" placeholder="ØªÙ‡Ø±Ø§Ù†" value="ØªÙ‡Ø±Ø§Ù†">
            </div>
            <button class="ai-button" onclick="generateBusinessRecommendations()">ØªÙˆÙ„ÛŒØ¯ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª</button>
            <div id="businessRecommendationsResult" class="ai-result" style="display: none;"></div>
        </div>
        
        <!-- Business Description Demo -->
        <div class="ai-demo-section">
            <h3>ğŸ“ ØªÙˆÙ„ÛŒØ¯ ØªÙˆØ¶ÛŒØ­Ø§Øª Ú©Ø³Ø¨ Ùˆ Ú©Ø§Ø±</h3>
            <div class="ai-input-group">
                <label for="businessName">Ù†Ø§Ù… Ú©Ø³Ø¨ Ùˆ Ú©Ø§Ø±:</label>
                <input type="text" id="businessName" placeholder="Ù…Ø«Ø§Ù„: Ø¨Ø§Ø´Ú¯Ø§Ù‡ Ø§Ù„Ù…Ù¾ÛŒÚ©" value="Ø¨Ø§Ø´Ú¯Ø§Ù‡ Ø§Ù„Ù…Ù¾ÛŒÚ©">
            </div>
            <div class="ai-input-group">
                <label for="businessCategory">Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ:</label>
                <input type="text" id="businessCategory" placeholder="Ù…Ø«Ø§Ù„: Ø¨Ø§Ø´Ú¯Ø§Ù‡ ÙˆØ±Ø²Ø´ÛŒ" value="Ø¨Ø§Ø´Ú¯Ø§Ù‡ ÙˆØ±Ø²Ø´ÛŒ">
            </div>
            <div class="ai-input-group">
                <label for="descLocation">Ø´Ù‡Ø±:</label>
                <input type="text" id="descLocation" placeholder="ØªÙ‡Ø±Ø§Ù†" value="ØªÙ‡Ø±Ø§Ù†">
            </div>
            <button class="ai-button" onclick="generateBusinessDescription()">ØªÙˆÙ„ÛŒØ¯ ØªÙˆØ¶ÛŒØ­Ø§Øª</button>
            <div id="businessDescriptionResult" class="ai-result" style="display: none;"></div>
        </div>
        
        <!-- Natural Language Search Demo -->
        <div class="ai-demo-section">
            <h3>Ø¬Ø³ØªØ¬ÙˆÛŒ Ø²Ø¨Ø§Ù† Ø·Ø¨ÛŒØ¹ÛŒ</h3>
            <div class="ai-input-group">
                <label for="naturalInput">Ø¹Ø¨Ø§Ø±Øª Ø·Ø¨ÛŒØ¹ÛŒ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯:</label>
                <textarea id="naturalInput" rows="2" placeholder="Ù…Ø«Ø§Ù„: Ø¯Ù†Ø¨Ø§Ù„ Ø±Ø³ØªÙˆØ±Ø§Ù† Ø®ÙˆØ¨ Ø¨Ø±Ø§ÛŒ Ø´Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ù…">Ø¯Ù†Ø¨Ø§Ù„ Ø±Ø³ØªÙˆØ±Ø§Ù† Ø®ÙˆØ¨ Ø¨Ø±Ø§ÛŒ Ø´Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ù…</textarea>
            </div>
            <div class="ai-input-group">
                <label for="nlLocation">Ø´Ù‡Ø±:</label>
                <input type="text" id="nlLocation" placeholder="ØªÙ‡Ø±Ø§Ù†" value="ØªÙ‡Ø±Ø§Ù†">
            </div>
            <button class="ai-button" onclick="generateNaturalLanguageSearch()">ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ Ú©Ù„Ù…Ø§Øª Ú©Ù„ÛŒØ¯ÛŒ</button>
            <div id="naturalLanguageResult" class="ai-result" style="display: none;"></div>
        </div>
        
        <!-- AI Status -->
        <div class="ai-demo-section">
            <h3>ÙˆØ¶Ø¹ÛŒØª Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ</h3>
            <div id="aiStatus" class="ai-result"></div>
        </div>
    </div>

    <!-- Firebase SDKs -->
    <script type="module" src="./firebase-config.js"></script>
    <script type="module" src="./firebase-utils.js"></script>
    <script type="module" src="./ai-utils.js"></script>
    
    <script type="module">
        import { 
            generateSearchSuggestions, 
            generateBusinessRecommendations, 
            generateBusinessDescription, 
            generateSearchQuery,
            getAIModelInfo,
            isAIAvailable 
        } from './ai-utils.js';
        
        // Global functions for onclick handlers
        window.generateSearchSuggestions = async function() {
            const input = document.getElementById('searchInput').value;
            const location = document.getElementById('searchLocation').value;
            const resultDiv = document.getElementById('searchSuggestionsResult');
            
            if (!input.trim()) {
                alert('Ù„Ø·ÙØ§Ù‹ Ø¹Ø¨Ø§Ø±Øª Ø¬Ø³ØªØ¬Ùˆ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = '<div class="ai-loading">Ø¯Ø± Ø­Ø§Ù„ ØªÙˆÙ„ÛŒØ¯ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª...</div>';
            
            try {
                const result = await generateSearchSuggestions(input, location);
                if (result.success) {
                    resultDiv.innerHTML = `<div class="ai-success">Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯Ù‡:</div>\n${JSON.stringify(result.suggestions, null, 2)}`;
                } else {
                    resultDiv.innerHTML = `<div class="ai-error">Ø®Ø·Ø§: ${result.error}</div>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<div class="ai-error">Ø®Ø·Ø§: ${error.message}</div>`;
            }
        };
        
        window.generateBusinessRecommendations = async function() {
            const preferences = document.getElementById('userPreferences').value;
            const location = document.getElementById('recLocation').value;
            const resultDiv = document.getElementById('businessRecommendationsResult');
            
            if (!preferences.trim()) {
                alert('Ù„Ø·ÙØ§Ù‹ ØªØ±Ø¬ÛŒØ­Ø§Øª Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = '<div class="ai-loading">Ø¯Ø± Ø­Ø§Ù„ ØªÙˆÙ„ÛŒØ¯ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª...</div>';
            
            try {
                const result = await generateBusinessRecommendations(preferences, location);
                if (result.success) {
                    resultDiv.innerHTML = `<div class="ai-success">Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª Ú©Ø³Ø¨ Ùˆ Ú©Ø§Ø±:</div>\n${JSON.stringify(result.recommendations, null, 2)}`;
                } else {
                    resultDiv.innerHTML = `<div class="ai-error">Ø®Ø·Ø§: ${result.error}</div>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<div class="ai-error">Ø®Ø·Ø§: ${error.message}</div>`;
            }
        };
        
        window.generateBusinessDescription = async function() {
            const name = document.getElementById('businessName').value;
            const category = document.getElementById('businessCategory').value;
            const location = document.getElementById('descLocation').value;
            const resultDiv = document.getElementById('businessDescriptionResult');
            
            if (!name.trim() || !category.trim()) {
                alert('Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ùˆ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ú©Ø³Ø¨ Ùˆ Ú©Ø§Ø± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = '<div class="ai-loading">Ø¯Ø± Ø­Ø§Ù„ ØªÙˆÙ„ÛŒØ¯ ØªÙˆØ¶ÛŒØ­Ø§Øª...</div>';
            
            try {
                const result = await generateBusinessDescription(name, category, location);
                if (result.success) {
                    resultDiv.innerHTML = `<div class="ai-success">ØªÙˆØ¶ÛŒØ­Ø§Øª ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯Ù‡:</div>\n${result.description}`;
                } else {
                    resultDiv.innerHTML = `<div class="ai-error">Ø®Ø·Ø§: ${result.error}</div>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<div class="ai-error">Ø®Ø·Ø§: ${error.message}</div>`;
            }
        };
        
        window.generateNaturalLanguageSearch = async function() {
            const input = document.getElementById('naturalInput').value;
            const location = document.getElementById('nlLocation').value;
            const resultDiv = document.getElementById('naturalLanguageResult');
            
            if (!input.trim()) {
                alert('Ù„Ø·ÙØ§Ù‹ Ø¹Ø¨Ø§Ø±Øª Ø·Ø¨ÛŒØ¹ÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = '<div class="ai-loading">Ø¯Ø± Ø­Ø§Ù„ ØªØ¨Ø¯ÛŒÙ„...</div>';
            
            try {
                const result = await generateSearchQuery(input, location);
                if (result.success) {
                    resultDiv.innerHTML = `<div class="ai-success">Ú©Ù„Ù…Ø§Øª Ú©Ù„ÛŒØ¯ÛŒ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø´Ø¯Ù‡:</div>\n${JSON.stringify(result.keywords, null, 2)}`;
                } else {
                    resultDiv.innerHTML = `<div class="ai-error">Ø®Ø·Ø§: ${result.error}</div>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<div class="ai-error">Ø®Ø·Ø§: ${error.message}</div>`;
            }
        };
        
        // Check AI status on page load
        window.addEventListener('DOMContentLoaded', function() {
            const statusDiv = document.getElementById('aiStatus');
            const aiInfo = getAIModelInfo();
            
            if (aiInfo.available) {
                statusDiv.innerHTML = `<div class="ai-success">âœ… Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ ÙØ¹Ø§Ù„</div>
Ù…Ø¯Ù„: ${aiInfo.model}
Ø§Ø±Ø§Ø¦Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ù‡: ${aiInfo.provider}`;
            } else {
                statusDiv.innerHTML = `<div class="ai-error">âŒ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ ØºÛŒØ±ÙØ¹Ø§Ù„</div>
Ù„Ø·ÙØ§Ù‹ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Firebase AI Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯.`;
            }
        });
    </script>
</body>
</html>
